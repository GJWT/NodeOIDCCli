<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: oic/service/service.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: oic/service/service.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Service = require('../../service').Service;
const Message = require('../../../nodeOIDCMsg/src/oicMsg/message');
const Authorization = require('./authorization').Authorization;
const AccessToken = require('./accessToken').AccessToken;
const CheckId = require('./checkId').CheckID;
const CheckSession = require('./checkSession').CheckSession;
const EndSession = require('./endSession').EndSession;
const ProviderInfoDiscovery =
    require('./providerInfoDiscovery').ProviderInfoDiscovery;
const RefreshAccessToken = require('./refreshAccessToken').RefreshAccessToken;
const Registration = require('./registration').Registration;
const UserInfo = require('./userInfo').UserInfo;
const WebFinger = require('../../webFinger/webFinger').WebFinger;

const PREFERENCE2PROVIDER = {
  'require_signed_request_object': 'request_object_algs_supported',
  'request_object_signing_alg': 'request_object_signing_alg_values_supported',
  'request_object_encryption_alg':
      'request_object_encryption_alg_values_supported',
  'request_object_encryption_enc':
      'request_object_encryption_enc_values_supported',
  'userinfo_signed_response_alg': 'userinfo_signing_alg_values_supported',
  'userinfo_encrypted_response_alg': 'userinfo_encryption_alg_values_supported',
  'userinfo_encrypted_response_enc': 'userinfo_encryption_enc_values_supported',
  'id_token_signed_response_alg': 'id_token_signing_alg_values_supported',
  'id_token_encrypted_response_alg': 'id_token_encryption_alg_values_supported',
  'id_token_encrypted_response_enc': 'id_token_encryption_enc_values_supported',
  'default_acr_values': 'acr_values_supported',
  'subject_type': 'subject_types_supported',
  'token_endpoint_auth_method': 'token_endpoint_auth_methods_supported',
  'token_endpoint_auth_signing_alg':
      'token_endpoint_auth_signing_alg_values_supported',
  'response_types': 'response_types_supported',
  'grant_types': 'grant_types_supported'
};

let PROVIDER2PREFERENCE = {};

for (let i = 0; i &lt; Object.keys(PREFERENCE2PROVIDER).length; i++) {
  let k = Object.keys(PREFERENCE2PROVIDER)[i];
  let v = PREFERENCE2PROVIDER[k];
  PROVIDER2PREFERENCE[k] = v;
};

const PROVIDER_DEFAULT = {
  'token_endpoint_auth_method': 'client_secret_basic',
  'id_token_signed_response_alg': 'RS256',
};

var services = {
  'AccessToken': AccessToken,
  'Authorization': Authorization,
  'CheckId': CheckId,
  'CheckSession': CheckSession,
  'EndSession': EndSession,
  'ProviderInfoDiscovery': ProviderInfoDiscovery,
  'RefreshAccessToken': RefreshAccessToken,
  'Registration': Registration,
  'Service': Service,
  'UserInfo': UserInfo,
  'WebFinger': WebFinger,
};

/**
 * Global function that fetches the service object based on the service name and initializes the service object with
 * the httpLib, keyJar, and clientAuthenticationMethod params.
 * @param {string} reqName Service name
 * @param {ServiceContext} serviceContext Contains information that a client needs to be able to talk to a server
 * @param {DB} stateDb DB class instance
 * @param {string} clientAuthnMethod One of the six client authentication methods : bearer_body, bearer_header, client_secret_basic,
 *  client_secret_jwt, client_secret_post, private_key_jwt
 * @param {Object&lt;string, string>} serviceConfiguration Client configuration that contains information such as client Metadata
 * @return service instance
 */
function OicFactory(reqName, serviceContext, stateDb, clientAuthnMethod, serviceConfiguration){
  for (let i = 0; i &lt; Object.keys(services).length; i++) {
    let key = Object.keys(services)[i];
    let val = services[key];
    if (key === reqName) {
      return new val(serviceContext, stateDb, clientAuthnMethod, serviceConfiguration);
    }
  }
}

module.exports.OicFactory = OicFactory;
module.exports.PREFERENCE2PROVIDER = PREFERENCE2PROVIDER;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AccessToken.html">AccessToken</a></li><li><a href="Authorization.html">Authorization</a></li><li><a href="BearerBody.html">BearerBody</a></li><li><a href="BearerHeader.html">BearerHeader</a></li><li><a href="CheckID.html">CheckID</a></li><li><a href="CheckSession.html">CheckSession</a></li><li><a href="ClientAuthnMethod.html">ClientAuthnMethod</a></li><li><a href="ClientSecretBasic.html">ClientSecretBasic</a></li><li><a href="ClientSecretJWT.html">ClientSecretJWT</a></li><li><a href="ClientSecretPost.html">ClientSecretPost</a></li><li><a href="EndSession.html">EndSession</a></li><li><a href="JRD.html">JRD</a></li><li><a href="JWSAuthnMethod.html">JWSAuthnMethod</a></li><li><a href="LINK.html">LINK</a></li><li><a href="OICCli.html">OICCli</a></li><li><a href="ProviderInfoDiscovery.html">ProviderInfoDiscovery</a></li><li><a href="RefreshAccessToken.html">RefreshAccessToken</a></li><li><a href="Registration.html">Registration</a></li><li><a href="Service.html">Service</a></li><li><a href="ServiceContext.html">ServiceContext</a></li><li><a href="State.html">State</a></li><li><a href="StateInterface.html">StateInterface</a></li><li><a href="URINormalizer.html">URINormalizer</a></li><li><a href="UserInfo.html">UserInfo</a></li><li><a href="Util.html">Util</a></li><li><a href="WebFinger.html">WebFinger</a></li></ul><h3>Global</h3><ul><li><a href="global.html#buildServices">buildServices</a></li><li><a href="global.html#Factory">Factory</a></li><li><a href="global.html#OicFactory">OicFactory</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed May 02 2018 11:05:48 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
